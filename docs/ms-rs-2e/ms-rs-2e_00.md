# 前言

本书关于 Rust，这是一种赋予你构建各种软件系统能力的编程语言，从底层嵌入式软件到动态 Web 应用。Rust 速度快、可靠、安全。它提供的性能和安全保证达到甚至超过了 C 和 C++，同时仍然是一种具有相对较低入门门槛的现代语言。Rust 致力于渐进式改进，结合其活跃而友好的社区，为该语言带来了光明的未来。

Rust 并非设计成一种全新的语言，也不试图重新发明轮子。相反，它是一种语言，它识别了隐藏在从未被广泛采用的研发原型语言中的独特理念。它将这些理念汇集在一起，形成了一个连贯的整体，并提供了一种实用的语言，让你能够构建安全的软件系统，同时仍然保持高效。

# 本书面向对象

本书面向熟悉其他命令式语言但新接触 Rust 的初学者和中级程序员。它假设你至少熟悉一种命令式编程语言，如 C、C++或 Python。了解函数式编程不是必需的，但了解其基本概念是好的。我们确保解释我们从这些语言中引入的任何概念或想法。

# 本书涵盖内容

第一章，*Rust 入门*，简要介绍了 Rust 的历史及其设计背后的动机，并涵盖了基本语言语法。本章以涵盖所有语言特性的练习结束。

第二章，*使用 Cargo 管理项目*，展示了 Rust 如何通过其专用的包管理器组织大型项目。这为后续章节奠定了基础。它还涵盖了与 Visual Studio Code 编辑器的集成。

第三章，*测试、文档和基准测试*，探讨了内置的测试框架，编写单元测试、集成测试，以及如何在 Rust 中编写文档。我们还涵盖了 Rust 代码的基准测试功能。稍后，作为最后的练习，我们将构建一个包含文档和测试的完整 crate。

第四章，*类型、泛型和特质*，探讨了 Rust 的表达式类型系统，并通过构建复数库来解释使用类型系统的各种方法。

第五章，*内存管理和安全性*，从内存管理的动机和传统低级编程语言中与内存相关的各种陷阱开始，然后转向解释 Rust 独特的编译时内存管理理念。我们还解释了 Rust 中各种智能指针类型。

第六章，*错误处理*，从错误处理的动机开始，探讨了其他语言中不同的错误处理模型。然后，章节检查了 Rust 的错误处理策略和类型，在探索非恢复性情况下的错误处理之前。章节最后介绍了一个实现自定义错误类型的库。

第七章，*高级概念*，更详细地探讨了之前章节中介绍的一些概念。它提供了关于 Rust 提供的某些类型系统抽象的底层模型的详细信息。

第八章，*并发*，探讨了 Rust 的标准库中的并发模型和 API，并教你如何构建没有数据竞争的高度并发程序。

第九章，*使用宏进行元编程*，检查了如何使用 Rust 强大且高级的宏结构编写生成代码的代码，并通过构建这两种类型的宏来概述语言的表达式宏和过程宏。

第十章，*不安全 Rust 和外部函数接口*，探讨了 Rust 的不安全模式以及与其他语言交互时提供的 API。示例包括从 Python、Node.js 和 C 等语言调用 Rust，以及探讨如何从其他语言调用 Rust。

第十一章，*日志记录*，解释了为什么日志记录是软件开发中的重要实践，回答了为什么我们需要日志框架，并探讨了 Rust 生态系统提供的可以用于帮助将日志集成到应用程序中的 crate。

第十二章，*Rust 中的网络编程：同步和异步 I/O*，简要介绍了网络编程。在了解了基础知识之后，章节涵盖了构建一个可以与官方 Redis 客户端通信的 Redis 服务器。最后，章节解释了如何使用标准库网络原语以及 Tokio 和 futures crate。

第十三章，*使用 Rust 构建 Web 应用程序*，首先探讨了 HTTP 协议，并使用 hyper crate 构建了一个简单的 URL 缩短服务器，随后使用 reqwest crate 构建了一个 URL 缩短客户端。最后，我们探讨了 actix-web，这是一个高性能的异步 Web 应用程序框架，用于构建书签 API 服务器。

第十四章，*在 Rust 中使用数据库交互*，从对数据库后端应用程序需求的分析开始，进而探讨 Rust 生态系统中可用于与各种数据库后端（如 SQLite 和 PostgreSQL）交互的可用 crate。本章还探讨了名为 diesel 的类型安全 ORM crate。随后，它介绍了如何将上一章中构建的 bookmarks API 服务器集成到数据库支持中，使用 diesel 进行集成。

第十五章，*使用 WebAssembly 在 Web 上使用 Rust*，解释了 WebAssembly 是什么以及开发者如何使用它。然后，我们继续探讨 Rust 生态系统中可用的 crate，并使用 Rust 和 WebAssembly 构建一个实时 markdown 编辑器 Web 应用程序。

第十六章，*使用 Rust 构建桌面应用程序*，解释了如何使用 GTK 框架使用 Rust 构建桌面应用程序。我们将构建一个简单的 hacker-news 桌面客户端。

第十七章，*调试*，探讨了使用 GDB 调试 Rust 代码，并展示了如何将 GDB 与 Visual Studio Code 编辑器集成。

# 充分利用本书

要真正掌握本书的内容，建议您写下示例代码，并尝试修改代码以熟悉 Rust 的错误消息，这样它们可以指导您编写正确的程序。

本书没有特定的硬件要求，任何具有至少 1 GB RAM 和相当新版的 Linux 操作系统的系统都适用。本书中的所有代码示例和项目都是在运行 Ubuntu 16.04 的 Linux 机器上开发的。Rust 还提供了对其他操作系统平台的一流支持，包括 macOS、BSD 和 Windows 的最新版本，因此所有代码示例也应该在这些平台上编译和运行良好。

# 下载示例代码文件

您可以从[www.packt.com](http://www.packt.com)的账户下载本书的示例代码文件。如果您在其他地方购买了此书，您可以访问[www.packt.com/support](http://www.packt.com/support)并注册，以便将文件直接通过电子邮件发送给您。

您可以通过以下步骤下载代码文件：

1.  在[www.packt.com](http://www.packt.com)登录或注册。

1.  选择支持选项卡。

1.  点击代码下载与勘误。

1.  在搜索框中输入书籍名称，并遵循屏幕上的说明。

下载文件后，请确保使用最新版本的软件解压缩或提取文件夹：

+   WinRAR/7-Zip for Windows

+   Zipeg/iZip/UnRarX for Mac

+   7-Zip/PeaZip for Linux

本书代码包也托管在 GitHub 上，网址为 [`github.com/PacktPublishing/Mastering-RUST-Second-Edition`](https://github.com/PacktPublishing/Mastering-RUST-Second-Edition)。如果代码有更新，它将在现有的 GitHub 仓库中更新。如果您在编译代码示例时遇到任何问题，请随时在 GitHub 上提出问题。

我们还有其他来自我们丰富的图书和视频目录的代码包，可在 [`github.com/PacktPublishing/`](https://github.com/PacktPublishing/) 上找到。查看它们吧！

# 使用的约定

本书使用了多种文本约定。

`CodeInText`：表示文本中的代码单词、数据库表名、文件夹名、文件名、文件扩展名、路径名、虚拟 URL、用户输入和 Twitter 昵称。以下是一个示例：“项目位于`Chapter08/`目录下的名为`threads_demo`的文件夹中。”

代码块设置如下：

```rs
fn main() {
    println!("Hello Rust!");
}
```

当我们希望您注意代码块中的特定部分时，相关的行或项目将以粗体显示：

```rs
[dependencies]
serde = "1.0.8"
crossbeam = "0.6.0"
typenum = "1.10.0"
```

任何命令行输入或输出都按以下方式编写：

```rs
$ rustc main.rs
$ cargo build
```

**粗体**：表示新术语、重要单词或屏幕上看到的单词。例如，菜单或对话框中的单词在文本中显示如下。以下是一个示例：“从管理面板中选择系统信息。”

警告或重要注意事项显示如下。

小技巧和技巧显示如下。

# 联系我们

读者反馈始终欢迎。

**一般反馈**：如果您对本书的任何方面有疑问，请在邮件主题中提及书名，并将邮件发送至 `customercare@packtpub.com`.

**勘误表**：尽管我们已经尽最大努力确保内容的准确性，但错误仍然可能发生。如果您在这本书中发现了错误，我们将不胜感激，如果您能向我们报告这一错误。请访问 [www.packt.com/submit-errata](http://www.packt.com/submit-errata)，选择您的书籍，点击勘误表提交表单链接，并输入详细信息。

**盗版**：如果您在互联网上以任何形式发现我们作品的非法副本，我们将不胜感激，如果您能提供位置地址或网站名称。请通过 `copyright@packt.com` 联系我们，并提供材料的链接。

**如果您有兴趣成为作者**：如果您在某个领域有专业知识，并且您有兴趣撰写或为书籍做出贡献，请访问 [authors.packtpub.com](http://authors.packtpub.com/).

# 评论

请留下评论。一旦您阅读并使用过这本书，为何不在您购买它的网站上留下评论？潜在读者可以查看并使用您的客观意见来做出购买决定，Packt 可以了解您对我们产品的看法，我们的作者也可以看到他们对书籍的反馈。谢谢！

如需了解更多关于 Packt 的信息，请访问 [packt.com](http://www.packt.com/).
